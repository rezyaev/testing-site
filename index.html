<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Testing Site</title>

		<script>
			window.ticketscloud_url = "https://stage.freetc.net";
		</script>
		<script src="https://stage.freetc.net/static/scripts/widget/tcwidget.js" async></script>
	</head>
	<body>
		<header>
			<button type="button">Open example.com</button>

			<button
				type="button"
				class="tc-background-yellow"
				data-tc-event="5f05e170c6290a28f035e51b"
				data-tc-token="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiIsImlzcyI6InN0YWdlLmZyZWV0Yy5uZXQifQ.eyJwIjoiNWIwMjg2Y2U1MTc1NjUwMDBkOWNiMWNhIn0.nhTEnL7EHnRhCIZ7FNr00oeEo3TI_vOrW0xuMxJLogM"
			>
				Купить билет
			</button>
		</header>

		<main>
			<h1>Logs</h1>
		</main>

		<script>
			console.stdlog = console.log.bind(console);
			console.log = function (...data) {
				console.stdlog.apply(console, data);

				const event = new CustomEvent("log", { detail: data });
				window.dispatchEvent(event);
			};
		</script>

		<script>
			const button = document.querySelector("button");
			const main = document.querySelector("main");

			button.addEventListener("click", () => {
				const returnValue = window.open("https://example.com", "_blank");
				appendLog(returnValue);
			});

			window.addEventListener("log", (event) => {
				appendLog(event.detail);
			});

			function appendLog(text) {
				const log = document.createElement("p");
				log.textContent = text;
				main.appendChild(log);
			}
		</script>
	</body>
</html>
