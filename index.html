<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Testing Site</title>
	</head>
	<body>
		<header>
			<button type="button">Open example.com</button>

			<a
				href="javascript;"
				type="button"
				class="tc-background-yellow"
				data-tc-event="5f05e170c6290a28f035e51b"
				data-tc-token="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiIsImlzcyI6InN0YWdlLmZyZWV0Yy5uZXQifQ.eyJwIjoiNWIwMjg2Y2U1MTc1NjUwMDBkOWNiMWNhIn0.nhTEnL7EHnRhCIZ7FNr00oeEo3TI_vOrW0xuMxJLogM"
			>
				Купить билет
			</a>

			<a
				class="btn btn--secondary"
				href="javascript;"
				data-tc-event="608813000e39532d89acd76a"
				data-tc-token="eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiIsImlzcyI6InRpY2tldHNjbG91ZC5ydSJ9.eyJwIjoiNWJlZDU1YzljNTgwYWMwMDBjZTJkZDUzIn0.K6JAUY_Qur-kiPn3pNZTBCkDQ1UX9PAyzbpGCNmTPNY"
			>
				Купить билет
			</a>
		</header>

		<main>
			<h1>Logs</h1>
		</main>

		<script>
			console.stdlog = console.log.bind(console);
			console.log = function (...data) {
				console.stdlog.apply(console, data);

				const event = new CustomEvent("log", { detail: data });
				window.dispatchEvent(event);
			};
		</script>

		<script>
			const button = document.querySelector("button");
			const main = document.querySelector("main");

			button.addEventListener("click", () => {
				// const returnValue = window.open("https://example.com", "_blank");
				// appendLog(returnValue);

				const url =
					"https://stage.freetc.net/v1/widgets/common?event=5f05e170c6290a28f035e51b&token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiIsImlzcyI6InN0YWdlLmZyZWV0Yy5uZXQifQ.eyJwIjoiNWIwMjg2Y2U1MTc1NjUwMDBkOWNiMWNhIn0.nhTEnL7EHnRhCIZ7FNr00oeEo3TI_vOrW0xuMxJLogM&partner=5b0286ce517565000d9cb1ca&m=mobile&utm=618124aa170ae25d18f44b7b&r=1&org=5b0286ce517565000d9cb1ca&city=1486209&category=592841f8515e35002dead964&tags=592841f8515e35002dead97b%2CProgressive";

				const opened = window.open(url, "_blank");
				appendLog(opened);
				if (!opened) {
					window.location = url;
				}
			});

			window.addEventListener("log", (event) => {
				appendLog(event.detail);
			});

			function appendLog(text) {
				const log = document.createElement("p");
				log.textContent = text;
				main.appendChild(log);
			}
		</script>

		<script>
			window.ticketscloud_url = "https://stage.freetc.net";
		</script>
		<!-- <script src="https://stage.freetc.net/static/scripts/widget/tcwidget.js"></script> -->
		<script src="https://ticketscloud.com/static/scripts/widget/tcwidget.js"></script>
	</body>
</html>
